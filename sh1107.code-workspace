{
	"folders": [
		{
			"path": ".",
		},
		{
			"path": "../amaranth",
		},
	],
	"settings": {
		// autoComplete
		"python.autoComplete.extraPaths": [
			"../amaranth",
			"../amaranth-soc",
			"../amaranth-boards",
		],
		// analysis
		"python.analysis.typeCheckingMode": "strict",
		"python.analysis.diagnosticMode": "workspace",
		"python.analysis.autoImportCompletions": true,
		"python.analysis.importFormat": "relative",
		"python.analysis.packageIndexDepths": [
			{
				"name": "amaranth",
				"depth": 3,
			},
			{
				"name": "amaranth_soc",
				"depth": 3,
			},
			{
				"name": "amaranth_boards",
				"depth": 3,
			}
		],
		"python.analysis.extraPaths": [
			"../amaranth",
			"../amaranth-soc",
			"../amaranth-boards",
		],
		"python.analysis.diagnosticSeverityOverrides": {
			"reportUnknownMemberType": "none",
			"reportInconsistentConstructor": "none",
			"reportMissingTypeStubs": "none",
			"reportUnknownVariableType": "none",
			"reportUnusedImport": "none",
			"reportUnknownLambdaType": "none",
			"reportUnknownArgumentType": "none",
			"reportGeneralTypeIssues": "none", // for Amaranth layout defns
		},
		// testing
		"python.testing.unittestEnabled": true,
		"python.testing.autoTestDiscoverOnSaveEnabled": true,
		"python.testing.pytestEnabled": false,
		// formatting
		"[python]": {
			"editor.defaultFormatter": "ms-python.python",
			"editor.codeActionsOnSave": {
				"source.organizeImports": true
			},
		},
		"isort.args": [
			"--profile",
			"black",
			"--nlb",
			"LOCALFOLDER",
		],
		"python.formatting.provider": "black",
		// linting
		"python.linting.flake8Enabled": true,
		"python.linting.flake8Args": [
			"--ignore=E501,E203,W503,F821",
		],
		"clangd.fallbackFlags": [
			"-I${workspaceFolder}/../osscad/share/yosys/include",
			"-I${workspaceFolder}/../oss-cad-suite/share/yosys/include",
			"-I${workspaceFolder}/build",
		],
	}
}
